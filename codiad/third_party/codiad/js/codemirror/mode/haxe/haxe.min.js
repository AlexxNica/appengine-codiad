!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("haxe",function(e,t){function n(e){return{type:e,style:"keyword"}}function r(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!0;r=!r&&"\\"==n}}function a(e,t,n){return H=e,J=n,t}function o(e,t){var n=e.next();if('"'==n||"'"==n)return r(e,t,u(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return a(n);if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(n)||"-"==n&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),a("number","number");if(t.reAllowed&&"~"==n&&e.eat(/\//))return i(e,"/"),e.eatWhile(/[gimsu]/),a("regexp","string-2");if("/"==n)return e.eat("*")?r(e,t,c):e.eat("/")?(e.skipToEnd(),a("comment","comment")):(e.eatWhile(te),a("operator",null,e.current()));if("#"==n)return e.skipToEnd(),a("conditional","meta");if("@"==n)return e.eat(/:/),e.eatWhile(/[\w_]/),a("metadata","meta");if(te.test(n))return e.eatWhile(te),a("operator",null,e.current());var o;if(/[A-Z]/.test(n))return e.eatWhile(/[\w_<>]/),o=e.current(),a("type","variable-3",o);e.eatWhile(/[\w_]/);var o=e.current(),l=ee.propertyIsEnumerable(o)&&ee[o];return l&&t.kwAllowed?a(l.type,l.style,o):a("variable","variable",o)}function u(e){return function(t,n){return i(t,e)&&(n.tokenize=o),a("string","string")}}function c(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return a("comment","comment")}function l(e,t,n,r,i,a){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=a,null!=r&&(this.align=r)}function f(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function d(e,t,n,r,i){var a=e.cc;for(re.state=e,re.stream=i,re.marked=null,re.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():g;if(o(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return re.marked?re.marked:"variable"==n&&f(e,r)?"variable-2":"variable"==n&&s(e,r)?"variable-3":t}}}function s(e,t){if(/[a-z]/.test(t.charAt(0)))return!1;for(var n=e.importedtypes.length,r=0;n>r;r++)if(e.importedtypes[r]==t)return!0}function m(e){for(var t=re.state,n=t.importedtypes;n;n=n.next)if(n.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}function p(){for(var e=arguments.length-1;e>=0;e--)re.cc.push(arguments[e])}function v(){return p.apply(null,arguments),!0}function y(e){var t=re.state;if(t.context){re.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function x(){re.state.context||(re.state.localVars=ie),re.state.context={prev:re.state.context,vars:re.state.localVars}}function h(){re.state.localVars=re.state.context.vars,re.state.context=re.state.context.prev}function b(e,t){var n=function(){var n=re.state;n.lexical=new l(n.indented,re.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=re.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?v():";"==e?p():v(t)}return t}function g(e){return"@"==e?v(W):"var"==e?v(b("vardef"),_,w(";"),k):"keyword a"==e?v(b("form"),A,g,k):"keyword b"==e?v(b("form"),g,k):"{"==e?v(b("}"),x,P,k,h):";"==e?v():"attribute"==e?v(E):"function"==e?v(B):"for"==e?v(b("form"),w("("),b(")"),j,w(")"),k,g,k):"variable"==e?v(b("stat"),T):"switch"==e?v(b("form"),A,b("}","switch"),w("{"),P,k,k):"case"==e?v(A,w(":")):"default"==e?v(w(":")):"catch"==e?v(b("form"),x,w("("),G,w(")"),g,k,h):"import"==e?v(M,w(";")):"typedef"==e?v(C):p(b("stat"),A,w(";"),k)}function A(e){return ne.hasOwnProperty(e)?v(S):"type"==e?v(S):"function"==e?v(B):"keyword c"==e?v(V):"("==e?v(b(")"),V,w(")"),k,S):"operator"==e?v(A):"["==e?v(b("]"),O(V,"]"),k,S):"{"==e?v(b("}"),O(I,"}"),k,S):v()}function V(e){return e.match(/[;\}\)\],]/)?p():p(A)}function S(e,t){if("operator"==e&&/\+\+|--/.test(t))return v(S);if("operator"==e||":"==e)return v(A);if(";"!=e)return"("==e?v(b(")"),O(A,")"),k,S):"."==e?v(Z,S):"["==e?v(b("]"),A,w("]"),k,S):void 0}function E(e){return"attribute"==e?v(E):"function"==e?v(B):"var"==e?v(_):void 0}function W(e){return":"==e?v(W):"variable"==e?v(W):"("==e?v(b(")"),O(z,")"),k,g):void 0}function z(e){return"variable"==e?v():void 0}function M(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(m(t),v()):"variable"==e||"property"==e||"."==e||"*"==t?v(M):void 0}function C(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(m(t),v()):"type"==e&&/[A-Z]/.test(t.charAt(0))?v():void 0}function T(e){return":"==e?v(k,g):p(S,w(";"),k)}function Z(e){return"variable"==e?(re.marked="property",v()):void 0}function I(e){return"variable"==e&&(re.marked="property"),ne.hasOwnProperty(e)?v(w(":"),A):void 0}function O(e,t){function n(r){return","==r?v(e,n):r==t?v():v(w(t))}return function(r){return r==t?v():p(e,n)}}function P(e){return"}"==e?v():p(g,P)}function _(e,t){return"variable"==e?(y(t),v(F,D)):v()}function D(e,t){return"="==t?v(A,D):","==e?v(_):void 0}function j(e,t){return"variable"==e?(y(t),v(q,A)):p()}function q(e,t){return"in"==t?v():void 0}function B(e,t){return"variable"==e||"type"==e?(y(t),v(B)):"new"==t?v(B):"("==e?v(b(")"),x,O(G,")"),k,F,g,h):void 0}function F(e){return":"==e?v(U):void 0}function U(e){return"type"==e?v():"variable"==e?v():"{"==e?v(b("}"),O($,"}"),k):void 0}function $(e){return"variable"==e?v(F):void 0}function G(e,t){return"variable"==e?(y(t),v(F)):void 0}var H,J,K=e.indentUnit,L=n("keyword a"),N=n("keyword b"),Q=n("keyword c"),R=n("operator"),X={type:"atom",style:"atom"},Y={type:"attribute",style:"attribute"},H=n("typedef"),ee={"if":L,"while":L,"else":N,"do":N,"try":N,"return":Q,"break":Q,"continue":Q,"new":Q,"throw":Q,"var":n("var"),inline:Y,"static":Y,using:n("import"),"public":Y,"private":Y,cast:n("cast"),"import":n("import"),macro:n("macro"),"function":n("function"),"catch":n("catch"),untyped:n("untyped"),callback:n("cb"),"for":n("for"),"switch":n("switch"),"case":n("case"),"default":n("default"),"in":R,never:n("property_access"),trace:n("trace"),"class":H,"abstract":H,"enum":H,"interface":H,typedef:H,"extends":H,"implements":H,dynamic:H,"true":X,"false":X,"null":X},te=/[+\-*&%=<>!?|]/,ne={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},re={state:null,column:null,marked:null,cc:null},ie={name:"this",next:null};return h.lex=!0,k.lex=!0,{startState:function(e){var n=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:o,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-K,0,"block",!1),localVars:t.localVars,importedtypes:n,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==H?n:(t.reAllowed=!("operator"!=H&&"keyword c"!=H&&!H.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=H,d(t,n,H,J,e))},indent:function(e,t){if(e.tokenize!=o)return 0;var n=t&&t.charAt(0),r=e.lexical;"stat"==r.type&&"}"==n&&(r=r.prev);var i=r.type,a=n==i;return"vardef"==i?r.indented+4:"form"==i&&"{"==n?r.indented:"stat"==i||"form"==i?r.indented+K:"switch"!=r.info||a?r.align?r.column+(a?0:1):r.indented+(a?0:K):r.indented+(/^(?:case|default)\b/.test(t)?K:2*K)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-haxe","haxe"),e.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(e,t){var n=e.peek(),r=e.sol();if("#"==n)return e.skipToEnd(),"comment";if(r&&"-"==n){var i="variable-2";return e.eat(/-/),"-"==e.peek()&&(e.eat(/-/),i="keyword a"),"D"==e.peek()&&(e.eat(/[D]/),i="keyword c",t.define=!0),e.eatWhile(/[A-Z]/i),i}var n=e.peek();return 0==t.inString&&"'"==n&&(t.inString=!0,n=e.next()),1==t.inString?(e.skipTo("'")||e.skipToEnd(),"'"==e.peek()&&(e.next(),t.inString=!1),"string"):(e.next(),null)},lineComment:"#"}}),e.defineMIME("text/x-hxml","hxml")});